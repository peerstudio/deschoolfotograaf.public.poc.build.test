{"version":3,"file":"2.BI3Xv33Z.js","sources":["../../../../../../src/routes/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport { enhance } from '$app/forms';\n\timport { getTranslation, type Language } from '$lib/i18n';\n\n\tlet { data, form } = $props();\n\n\tlet language = $derived<Language>(data.language);\n\tlet code1 = $state('');\n\tlet code2 = $state('');\n\tlet code3 = $state('');\n\n\tlet input1: HTMLInputElement;\n\tlet input2: HTMLInputElement;\n\tlet input3: HTMLInputElement;\n\tlet formElement: HTMLFormElement;\n\n\tfunction t(key: any) {\n\t\treturn getTranslation(language, key);\n\t}\n\n\tfunction sanitizeNumbers(value: string): string {\n\t\treturn value.replace(/\\D/g, '');\n\t}\n\n\tfunction checkAndSubmit() {\n\t\t// Auto-submit if all fields are filled\n\t\tif (code1.length === 3 && code2.length === 4 && code3.length === 3) {\n\t\t\tformElement?.requestSubmit();\n\t\t}\n\t}\n\n\tfunction handlePaste(e: ClipboardEvent, field: 'code1' | 'code2' | 'code3') {\n\t\te.preventDefault();\n\t\tconst pastedText = e.clipboardData?.getData('text') || '';\n\t\tconst numbers = sanitizeNumbers(pastedText);\n\n\t\tif (numbers.length >= 10) {\n\t\t\t// Full code pasted, distribute across all three fields\n\t\t\tcode1 = numbers.slice(0, 3);\n\t\t\tcode2 = numbers.slice(3, 7);\n\t\t\tcode3 = numbers.slice(7, 10);\n\t\t\tinput3?.focus();\n\t\t\t// Need timeout for paste because DOM values update after state\n\t\t\tsetTimeout(() => checkAndSubmit(), 0);\n\t\t} else if (field === 'code1') {\n\t\t\t// Paste in first field\n\t\t\tif (numbers.length <= 3) {\n\t\t\t\tcode1 = numbers;\n\t\t\t} else if (numbers.length <= 7) {\n\t\t\t\tcode1 = numbers.slice(0, 3);\n\t\t\t\tcode2 = numbers.slice(3);\n\t\t\t\tinput2?.focus();\n\t\t\t} else {\n\t\t\t\tcode1 = numbers.slice(0, 3);\n\t\t\t\tcode2 = numbers.slice(3, 7);\n\t\t\t\tcode3 = numbers.slice(7, 10);\n\t\t\t\tinput3?.focus();\n\t\t\t\t// Need timeout for paste because DOM values update after state\n\t\t\t\tsetTimeout(() => checkAndSubmit(), 0);\n\t\t\t}\n\t\t} else if (field === 'code2') {\n\t\t\t// Paste in second field\n\t\t\tif (numbers.length <= 4) {\n\t\t\t\tcode2 = numbers;\n\t\t\t} else {\n\t\t\t\tcode2 = numbers.slice(0, 4);\n\t\t\t\tcode3 = numbers.slice(4, 7);\n\t\t\t\tinput3?.focus();\n\t\t\t\t// Need timeout for paste because DOM values update after state\n\t\t\t\tsetTimeout(() => checkAndSubmit(), 0);\n\t\t\t}\n\t\t} else {\n\t\t\t// Paste in third field\n\t\t\tcode3 = numbers.slice(0, 3);\n\t\t\t// Need timeout for paste because DOM values update after state\n\t\t\tsetTimeout(() => checkAndSubmit(), 0);\n\t\t}\n\t}\n\n\tfunction handleInput(e: Event, field: 'code1' | 'code2' | 'code3') {\n\t\tconst target = e.target as HTMLInputElement;\n\t\tconst sanitized = sanitizeNumbers(target.value);\n\n\t\tif (field === 'code1') {\n\t\t\tcode1 = sanitized.slice(0, 3);\n\t\t\tif (sanitized.length >= 3) input2?.focus();\n\t\t} else if (field === 'code2') {\n\t\t\tcode2 = sanitized.slice(0, 4);\n\t\t\tif (sanitized.length >= 4) input3?.focus();\n\t\t} else {\n\t\t\tcode3 = sanitized.slice(0, 3);\n\t\t\tif (sanitized.length === 3) {\n\t\t\t\t// Auto-submit when last field is complete\n\t\t\t\tcheckAndSubmit();\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction handleKeydown(e: KeyboardEvent, field: 'code1' | 'code2' | 'code3') {\n\t\t// Allow backspace to move to previous field if current is empty\n\t\tif (e.key === 'Backspace') {\n\t\t\tif (field === 'code2' && code2 === '') {\n\t\t\t\tinput1?.focus();\n\t\t\t} else if (field === 'code3' && code3 === '') {\n\t\t\t\tinput2?.focus();\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<div class=\"min-h-screen bg-gray-50 flex flex-col items-center justify-center p-4\">\n\t<div class=\"w-full max-w-md\">\n\t\t<!-- Main Card -->\n\t\t<div class=\"bg-white rounded-lg shadow-lg p-8\">\n\t\t\t<div class=\"mb-6 text-center\">\n\t\t\t\t<h1 class=\"text-2xl font-bold text-gray-800 mb-2\">DeSchoolfotograaf.be</h1>\n\t\t\t</div>\n\n\t\t\t<p class=\"text-center text-gray-600 mb-6\">{t('enterCode')}</p>\n\n\t\t\t<!-- Code Input Form -->\n\t\t\t<form bind:this={formElement} method=\"POST\" action=\"?/login\" use:enhance class=\"space-y-6\">\n\t\t\t\t<div class=\"flex gap-3 justify-center\">\n\t\t\t\t\t<input\n\t\t\t\t\t\tbind:this={input1}\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tinputmode=\"numeric\"\n\t\t\t\t\t\tname=\"code1\"\n\t\t\t\t\t\tbind:value={code1}\n\t\t\t\t\t\toninput={(e) => handleInput(e, 'code1')}\n\t\t\t\t\t\tonpaste={(e) => handlePaste(e, 'code1')}\n\t\t\t\t\t\tonkeydown={(e) => handleKeydown(e, 'code1')}\n\t\t\t\t\t\tmaxlength=\"3\"\n\t\t\t\t\t\tclass=\"w-20 h-20 text-center text-2xl font-bold border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\"\n\t\t\t\t\t\tplaceholder=\"\"\n\t\t\t\t\t/>\n\t\t\t\t\t<span class=\"text-3xl text-gray-400 flex items-center\">-</span>\n\t\t\t\t\t<input\n\t\t\t\t\t\tbind:this={input2}\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tinputmode=\"numeric\"\n\t\t\t\t\t\tname=\"code2\"\n\t\t\t\t\t\tbind:value={code2}\n\t\t\t\t\t\toninput={(e) => handleInput(e, 'code2')}\n\t\t\t\t\t\tonpaste={(e) => handlePaste(e, 'code2')}\n\t\t\t\t\t\tonkeydown={(e) => handleKeydown(e, 'code2')}\n\t\t\t\t\t\tmaxlength=\"4\"\n\t\t\t\t\t\tclass=\"w-24 h-20 text-center text-2xl font-bold border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\"\n\t\t\t\t\t\tplaceholder=\"\"\n\t\t\t\t\t/>\n\t\t\t\t\t<span class=\"text-3xl text-gray-400 flex items-center\">-</span>\n\t\t\t\t\t<input\n\t\t\t\t\t\tbind:this={input3}\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tinputmode=\"numeric\"\n\t\t\t\t\t\tname=\"code3\"\n\t\t\t\t\t\tbind:value={code3}\n\t\t\t\t\t\toninput={(e) => handleInput(e, 'code3')}\n\t\t\t\t\t\tonpaste={(e) => handlePaste(e, 'code3')}\n\t\t\t\t\t\tonkeydown={(e) => handleKeydown(e, 'code3')}\n\t\t\t\t\t\tmaxlength=\"3\"\n\t\t\t\t\t\tclass=\"w-20 h-20 text-center text-2xl font-bold border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none\"\n\t\t\t\t\t\tplaceholder=\"\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t{#if form?.error}\n\t\t\t\t\t<p class=\"text-red-600 text-sm text-center\">{t(form.error)}</p>\n\t\t\t\t{/if}\n\n\t\t\t\t<button\n\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\tclass=\"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors\"\n\t\t\t\t>\n\t\t\t\t\t{t('continue')}\n\t\t\t\t</button>\n\t\t\t</form>\n\n\t\t\t<!-- Footer Links -->\n\t\t\t<div class=\"mt-8 text-center text-sm text-gray-600 space-y-2\">\n\t\t\t\t<p>\n\t\t\t\t\t{t('loginProblems')}\n\t\t\t\t\t<a href=\"mailto:{t('contact')}\" class=\"text-blue-600 hover:underline\">{t('contact')}</a>\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t<a href=\"/terms\" class=\"text-blue-600 hover:underline\">{t('termsOfSale')}</a>\n\t\t\t\t</p>\n\t\t\t\t<p class=\"text-xs text-gray-500 mt-4\">\n\t\t\t\t\t{t('copyright')} - DeSchoolfotograaf.be\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n"],"names":["language","code1","$.state","code2","code3","input1","input2","input3","formElement","t","key","getTranslation","$.get","sanitizeNumbers","value","checkAndSubmit","handlePaste","field","pastedText","numbers","$.set","handleInput","target","sanitized","handleKeydown","div","root","div_1","div_2","p","form_1","div_3","input","$.child","$.remove_input_defaults","$$value","input_1","$.sibling","input_2","p_1","root_1","$.template_effect","$0","$.set_text","text_1","$$render","consequent","button","node","text_2","$.reset","$$node","enhance","div_4","p_2","a","text_3","p_3","a_1","p_4","$3","$.event"],"mappings":"2hFAAA,UAMK,IAAAA,gBAAmC,QAAQ,EAC3CC,EAAQC,EAAO,EAAE,EACjBC,EAAQD,EAAO,EAAE,EACjBE,EAAQF,EAAO,EAAE,EAEjBG,EACAC,EACAC,EACAC,WAEKC,EAAEC,EAAU,QACbC,GAAcC,EAACZ,CAAQ,EAAEU,CAAG,CACpC,UAESG,EAAgBC,EAAuB,CACxC,OAAAA,EAAM,QAAQ,MAAO,EAAE,CAC/B,CAES,SAAAC,GAAiB,CAErBH,EAAAX,CAAK,EAAC,SAAW,GAACW,EAAIT,CAAK,EAAC,SAAW,KAAKC,CAAK,EAAC,SAAW,GAChEI,GAAa,cAAa,CAE5B,CAES,SAAAQ,EAAY,EAAmBC,EAAoC,CAC3E,EAAE,eAAc,QACVC,EAAa,EAAE,eAAe,QAAQ,MAAM,GAAK,GACjDC,EAAUN,EAAgBK,CAAU,EAEtCC,EAAQ,QAAU,IAErBC,EAAAnB,EAAQkB,EAAQ,MAAM,EAAG,CAAC,EAAA,EAAA,EAC1BC,EAAAjB,EAAQgB,EAAQ,MAAM,EAAG,CAAC,EAAA,EAAA,EAC1BC,EAAAhB,EAAQe,EAAQ,MAAM,EAAG,EAAE,EAAA,EAAA,EAC3BZ,GAAQ,MAAK,EAEb,WAAU,IAAOQ,EAAc,EAAI,CAAC,GAC1BE,IAAU,QAEhBE,EAAQ,QAAU,EACrBC,EAAAnB,EAAQkB,EAAO,EAAA,EACLA,EAAQ,QAAU,GAC5BC,EAAAnB,EAAQkB,EAAQ,MAAM,EAAG,CAAC,EAAA,EAAA,EAC1BC,EAAAjB,EAAQgB,EAAQ,MAAM,CAAC,EAAA,EAAA,EACvBb,GAAQ,MAAK,IAEbc,EAAAnB,EAAQkB,EAAQ,MAAM,EAAG,CAAC,EAAA,EAAA,EAC1BC,EAAAjB,EAAQgB,EAAQ,MAAM,EAAG,CAAC,EAAA,EAAA,EAC1BC,EAAAhB,EAAQe,EAAQ,MAAM,EAAG,EAAE,EAAA,EAAA,EAC3BZ,GAAQ,MAAK,EAEb,WAAU,IAAOQ,EAAc,EAAI,CAAC,GAE3BE,IAAU,QAEhBE,EAAQ,QAAU,EACrBC,EAAAjB,EAAQgB,EAAO,EAAA,GAEfC,EAAAjB,EAAQgB,EAAQ,MAAM,EAAG,CAAC,EAAA,EAAA,EAC1BC,EAAAhB,EAAQe,EAAQ,MAAM,EAAG,CAAC,EAAA,EAAA,EAC1BZ,GAAQ,MAAK,EAEb,WAAU,IAAOQ,EAAc,EAAI,CAAC,IAIrCK,EAAAhB,EAAQe,EAAQ,MAAM,EAAG,CAAC,EAAA,EAAA,EAE1B,WAAU,IAAOJ,EAAc,EAAI,CAAC,EAEtC,CAES,SAAAM,EAAY,EAAUJ,EAAoC,OAC5DK,EAAS,EAAE,OACXC,EAAYV,EAAgBS,EAAO,KAAK,EAE1CL,IAAU,SACbG,EAAAnB,EAAQsB,EAAU,MAAM,EAAG,CAAC,EAAA,EAAA,EACxBA,EAAU,QAAU,GAAGjB,GAAQ,MAAK,GAC9BW,IAAU,SACpBG,EAAAjB,EAAQoB,EAAU,MAAM,EAAG,CAAC,EAAA,EAAA,EACxBA,EAAU,QAAU,GAAGhB,GAAQ,MAAK,IAExCa,EAAAhB,EAAQmB,EAAU,MAAM,EAAG,CAAC,EAAA,EAAA,EACxBA,EAAU,SAAW,GAExBR,EAAc,EAGjB,CAES,SAAAS,EAAc,EAAkBP,EAAoC,CAExE,EAAE,MAAQ,cACTA,IAAU,SAAOL,EAAIT,CAAK,IAAK,GAClCE,GAAQ,MAAK,EACHY,IAAU,WAAWb,CAAK,IAAK,IACzCE,GAAQ,MAAK,EAGhB,KAGAmB,EAAGC,GAAA,EACFC,IADDF,CAAG,EAGDG,IAFDD,CAAG,EAODE,MALDD,CAAG,EAAA,CAAA,MAKFC,EAAC,EAAA,IAADA,CAAC,EAGD,IAAAC,IAHAD,EAAC,CAAA,EAIAE,IADDD,CAAI,EAEFE,EAAAC,EADDF,CAAG,EACFG,EAAAF,CAAA,EAAAA,EAMA,QAAU,GAAMX,EAAY,EAAG,OAAO,EANtCW,EAQA,UAAY,GAAMR,EAAc,EAAG,OAAO,IAR1CQ,EAAAG,GACW9B,QAAAA,CAAM,MAajB+B,EAAAC,EAdAL,EAAA,CAAA,EAcAE,EAAAE,CAAA,EAAAA,EAMA,QAAU,GAAMf,EAAY,EAAG,OAAO,EANtCe,EAQA,UAAY,GAAMZ,EAAc,EAAG,OAAO,IAR1CY,EAAAD,GACW7B,QAAAA,CAAM,MAajBgC,EAAAD,EAdAD,EAAA,CAAA,EAcAF,EAAAI,CAAA,EAAAA,EAMA,QAAU,GAAMjB,EAAY,EAAG,OAAO,EANtCiB,EAQA,UAAY,GAAMd,EAAc,EAAG,OAAO,IAR1Cc,EAAAH,GACW5B,QAAAA,CAAM,IA9BlBwB,CAAG,UAAHA,EAAG,CAAA,iBA6CFQ,EAACC,GAAA,MAADD,EAAC,EAAA,IAADA,CAAC,EAA2CE,EAAAC,GAAAC,EAAAC,EAAAF,CAAA,EAAA,CAAA,IAAAjC,SAAO,KAAK,CAAA,CAAA,MAAxD8B,CAAC,oBADQ,OAAKM,EAAAC,CAAA,IAIf,IAAAC,EAAAV,EAAAW,EAAA,CAAA,EAAAC,GAAAhB,EAAAc,EAAA,EAAA,EAAAG,EAAAH,CAAA,IAjDDjB,CAAI,IAAJA,EAAIK,GAAY3B,EAAW2B,EAAA,IAAX3B,CAAW,KAA3BsB,EAAIqB,GAAAC,KAAAD,CAAA,CAAA,EA0DJ,IAAAE,IA1DAvB,EAAI,CAAA,EA2DHwB,IADDD,CAAG,MACFC,CAAC,EAEAC,EAAClB,EAAAmB,CAAA,OAADD,EAAC,EAAA,IAADA,CAAC,IAFFD,CAAC,EAID,IAAAG,IAJAH,EAAC,CAAA,EAKAI,IADDD,CAAC,OACAC,EAAC,EAAA,IAADA,CAAC,IADFD,CAAC,EAGD,IAAAE,IAHAF,EAAC,CAAA,OAGDE,CAAC,IAADA,CAAC,IARFN,CAAG,IAlEJzB,CAAG,IAFJD,CAAG,IADJF,CAAG,4DAwEE8B,EAAC,OAAA,UAAAK,GAAA,EAAA,EAAA,+DAhEuC,IAAAnD,EAAE,WAAW,EAwDrD,IAAAA,EAAE,UAAU,EAOZ,IAAAA,EAAE,eAAe,EACD,IAAAA,EAAE,SAAS,EAA2C,IAAAA,EAAE,SAAS,EAG1B,IAAAA,EAAE,aAAa,EAGtE,IAAAA,EAAE,WAAW,IAjEboD,EAAA,QAAA7B,EAOU,GAAMhB,EAAY,EAAG,OAAO,CAAA,IAPtCgB,EAAA,IAAApB,EAKYX,CAAK,OAALA,EAAKkC,CAAA,CAAA,EASjB0B,EAAA,QAAAzB,EAOU,GAAMpB,EAAY,EAAG,OAAO,CAAA,IAPtCoB,EAAA,IAAAxB,EAKYT,CAAK,OAALA,EAAKgC,CAAA,CAAA,EASjB0B,EAAA,QAAAvB,EAOU,GAAMtB,EAAY,EAAG,OAAO,CAAA,IAPtCsB,EAAA,IAAA1B,EAKYR,CAAK,OAALA,EAAK+B,CAAA,CAAA,MA9CtBV,CAAG,MAFJ"}