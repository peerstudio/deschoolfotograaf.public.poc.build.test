import{k as g,m as h,l as w,ah as k,ai as T,aj as _,$ as u,ak as L,C as S,al as D,am as x,an as M,ao as H,ap as I}from"./Cx_Ee0-d.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e.SENTRY_RELEASE={id:"c60a69e04ed3d2b7e30fad6c7faf609a8c3ddb8b"}}catch{}})();try{(function(){var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="067c04ef-15de-46e2-a539-166793d3a5ad",e._sentryDebugIdIdentifier="sentry-dbid-067c04ef-15de-46e2-a539-166793d3a5ad")})()}catch{}function N(e,t,s){g(()=>{var n=h(()=>t(e,s?.())||{});if(s&&n?.update){var a=!1,r={};w(()=>{var o=s();k(o),a&&T(r,o)&&(r=o,n.update(o))}),a=!0}if(n?.destroy)return()=>n.destroy()})}function j(e,t,s=t){var n=new WeakSet;_(e,"input",async a=>{var r=a?e.defaultValue:e.value;if(r=b(e)?m(r):r,s(r),u!==null&&n.add(u),await L(),r!==(r=t())){var o=e.selectionStart,l=e.selectionEnd,c=e.value.length;if(e.value=r??"",l!==null){var d=e.value.length;o===l&&l===c&&d>c?(e.selectionStart=d,e.selectionEnd=d):(e.selectionStart=o,e.selectionEnd=Math.min(l,d))}}}),(S&&e.defaultValue!==e.value||h(t)==null&&e.value)&&(s(b(e)?m(e.value):e.value),u!==null&&n.add(u)),w(()=>{var a=t();if(e===document.activeElement){var r=D??u;if(n.has(r))return}b(e)&&a===m(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}function b(e){var t=e.type;return t==="number"||t==="range"}function m(e){return e===""?null:+e}function F(e){const t=JSON.parse(e);return t.data&&(t.data=x(t.data,M.decoders)),t}function y(e){return HTMLElement.prototype.cloneNode.call(e)}function O(e,t=()=>{}){const s=async({action:a,result:r,reset:o=!0,invalidateAll:l=!0})=>{r.type==="success"&&(o&&HTMLFormElement.prototype.reset.call(e),l&&await H()),(location.origin+location.pathname===a.origin+a.pathname||r.type==="redirect"||r.type==="error")&&await I(r)};async function n(a){if((a.submitter?.hasAttribute("formmethod")?a.submitter.formMethod:y(e).method)!=="post")return;a.preventDefault();const o=new URL(a.submitter?.hasAttribute("formaction")?a.submitter.formAction:y(e).action),l=a.submitter?.hasAttribute("formenctype")?a.submitter.formEnctype:y(e).enctype,c=new FormData(e,a.submitter),d=new AbortController;let p=!1;const E=await t({action:o,cancel:()=>p=!0,controller:d,formData:c,formElement:e,submitter:a.submitter})??s;if(p)return;let f;try{const i=new Headers({accept:"application/json","x-sveltekit-action":"true"});l!=="multipart/form-data"&&i.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(l)?l:"application/x-www-form-urlencoded");const A=l==="multipart/form-data"?c:new URLSearchParams(c),v=await fetch(o,{method:"POST",headers:i,cache:"no-store",body:A,signal:d.signal});f=F(await v.text()),f.type==="error"&&(f.status=v.status)}catch(i){if(i?.name==="AbortError")return;f={type:"error",error:i}}await E({action:o,formData:c,formElement:e,update:i=>s({action:o,result:f,reset:i?.reset,invalidateAll:i?.invalidateAll}),result:f})}return HTMLFormElement.prototype.addEventListener.call(e,"submit",n),{destroy(){HTMLFormElement.prototype.removeEventListener.call(e,"submit",n)}}}export{N as a,j as b,F as d,O as e};
