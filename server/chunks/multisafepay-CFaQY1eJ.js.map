{"version":3,"file":"multisafepay-CFaQY1eJ.js","sources":["../../../.svelte-kit/adapter-node/chunks/multisafepay.js"],"sourcesContent":["!(function() {\n  try {\n    var e = \"undefined\" != typeof window ? window : \"undefined\" != typeof global ? global : \"undefined\" != typeof globalThis ? globalThis : \"undefined\" != typeof self ? self : {};\n    e.SENTRY_RELEASE = { id: \"99069e462683fde0ac533c0f9d57bdbde12d31be\" };\n  } catch (e2) {\n  }\n})();\n;\n{\n  try {\n    (function() {\n      var e = \"undefined\" != typeof window ? window : \"undefined\" != typeof global ? global : \"undefined\" != typeof globalThis ? globalThis : \"undefined\" != typeof self ? self : {}, n = new e.Error().stack;\n      n && (e._sentryDebugIds = e._sentryDebugIds || {}, e._sentryDebugIds[n] = \"6c92ee8f-d783-426a-9ee6-8a37e6e5755f\", e._sentryDebugIdIdentifier = \"sentry-dbid-6c92ee8f-d783-426a-9ee6-8a37e6e5755f\");\n    })();\n  } catch (e) {\n  }\n}\n;\nimport { b as private_env } from \"./shared-server.js\";\nasync function createMultiSafepayOrder(order) {\n  const apiKey = private_env.MULTISAFEPAY_API_KEY;\n  const apiUrl = private_env.MULTISAFEPAY_API_URL || \"https://testapi.multisafepay.com/v1/json\";\n  if (!apiKey) {\n    throw new Error(\"MultiSafepay API key not configured\");\n  }\n  try {\n    const response = await fetch(`${apiUrl}/orders`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"api-key\": apiKey\n      },\n      body: JSON.stringify({\n        type: \"redirect\",\n        order_id: order.orderId,\n        currency: \"EUR\",\n        amount: order.amount,\n        gateway: order.gatewayId,\n        description: order.description,\n        payment_options: {\n          notification_method: \"POST\",\n          notification_url: order.notificationUrl,\n          redirect_url: order.successRedirectUrl,\n          cancel_url: order.cancelRedirectUrl,\n          close_window: false\n        },\n        customer: order.customer ? {\n          locale: order.customer.locale,\n          ip_address: \"0.0.0.0\",\n          // Will be updated by MultiSafepay\n          first_name: order.customer.firstName,\n          last_name: order.customer.lastName,\n          email: order.customer.email\n        } : void 0\n      })\n    });\n    const result = await response.json();\n    if (!response.ok) {\n      return {\n        success: false,\n        error: {\n          code: result.error_code || \"UNKNOWN_ERROR\",\n          message: result.error_info || \"Payment initialization failed\"\n        }\n      };\n    }\n    return {\n      success: true,\n      data: {\n        order_id: result.data.order_id,\n        payment_url: result.data.payment_url,\n        transaction_id: result.data.transaction_id\n      }\n    };\n  } catch (error) {\n    console.error(\"MultiSafepay API error:\", error);\n    return {\n      success: false,\n      error: {\n        code: \"NETWORK_ERROR\",\n        message: error instanceof Error ? error.message : \"Failed to connect to payment provider\"\n      }\n    };\n  }\n}\nasync function getMultiSafepayOrderStatus(orderId) {\n  const apiKey = private_env.MULTISAFEPAY_API_KEY;\n  const apiUrl = private_env.MULTISAFEPAY_API_URL || \"https://testapi.multisafepay.com/v1/json\";\n  if (!apiKey) {\n    throw new Error(\"MultiSafepay API key not configured\");\n  }\n  try {\n    const response = await fetch(`${apiUrl}/orders/${orderId}`, {\n      method: \"GET\",\n      headers: {\n        \"api-key\": apiKey\n      }\n    });\n    if (!response.ok) {\n      return null;\n    }\n    const result = await response.json();\n    return result.data;\n  } catch (error) {\n    console.error(\"MultiSafepay status check error:\", error);\n    return null;\n  }\n}\nexport {\n  createMultiSafepayOrder as c,\n  getMultiSafepayOrderStatus as g\n};\n"],"names":[],"mappings":";;AAAA,CAAC,CAAC,WAAW;AACb,EAAE,IAAI;AACN,IAAI,IAAI,CAAC,GAAG,WAAW,IAAI,OAAO,MAAM,GAAG,MAAM,GAAG,WAAW,IAAI,OAAO,MAAM,GAAG,MAAM,GAAG,WAAW,IAAI,OAAO,UAAU,GAAG,UAAU,GAAG,WAAW,IAAI,OAAO,IAAI,GAAG,IAAI,GAAG,EAAE;AAClL,IAAI,CAAC,CAAC,cAAc,GAAG,EAAE,EAAE,EAAE,0CAA0C,EAAE;AACzE,EAAE,CAAC,CAAC,OAAO,EAAE,EAAE;AACf,EAAE;AACF,CAAC,GAAG;AAEJ;AACA,EAAE,IAAI;AACN,IAAI,CAAC,WAAW;AAChB,MAAM,IAAI,CAAC,GAAG,WAAW,IAAI,OAAO,MAAM,GAAG,MAAM,GAAG,WAAW,IAAI,OAAO,MAAM,GAAG,MAAM,GAAG,WAAW,IAAI,OAAO,UAAU,GAAG,UAAU,GAAG,WAAW,IAAI,OAAO,IAAI,GAAG,IAAI,GAAG,EAAE,EAAE,CAAC,GAAG,IAAI,CAAC,CAAC,KAAK,EAAE,CAAC,KAAK;AAC7M,MAAM,CAAC,KAAK,CAAC,CAAC,eAAe,GAAG,CAAC,CAAC,eAAe,IAAI,EAAE,EAAE,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC,GAAG,sCAAsC,EAAE,CAAC,CAAC,wBAAwB,GAAG,kDAAkD,CAAC;AACxM,IAAI,CAAC,GAAG;AACR,EAAE,CAAC,CAAC,OAAO,CAAC,EAAE;AACd,EAAE;AACF;AAGA,eAAe,uBAAuB,CAAC,KAAK,EAAE;AAC9C,EAAE,MAAM,MAAM,GAAG,WAAW,CAAC,oBAAoB;AACjD,EAAE,MAAM,MAAM,GAAG,WAAW,CAAC,oBAAoB,IAAI,0CAA0C;AAC/F,EAAE,IAAI,CAAC,MAAM,EAAE;AACf,IAAI,MAAM,IAAI,KAAK,CAAC,qCAAqC,CAAC;AAC1D,EAAE;AACF,EAAE,IAAI;AACN,IAAI,MAAM,QAAQ,GAAG,MAAM,KAAK,CAAC,CAAC,EAAE,MAAM,CAAC,OAAO,CAAC,EAAE;AACrD,MAAM,MAAM,EAAE,MAAM;AACpB,MAAM,OAAO,EAAE;AACf,QAAQ,cAAc,EAAE,kBAAkB;AAC1C,QAAQ,SAAS,EAAE;AACnB,OAAO;AACP,MAAM,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC;AAC3B,QAAQ,IAAI,EAAE,UAAU;AACxB,QAAQ,QAAQ,EAAE,KAAK,CAAC,OAAO;AAC/B,QAAQ,QAAQ,EAAE,KAAK;AACvB,QAAQ,MAAM,EAAE,KAAK,CAAC,MAAM;AAC5B,QAAQ,OAAO,EAAE,KAAK,CAAC,SAAS;AAChC,QAAQ,WAAW,EAAE,KAAK,CAAC,WAAW;AACtC,QAAQ,eAAe,EAAE;AACzB,UAAU,mBAAmB,EAAE,MAAM;AACrC,UAAU,gBAAgB,EAAE,KAAK,CAAC,eAAe;AACjD,UAAU,YAAY,EAAE,KAAK,CAAC,kBAAkB;AAChD,UAAU,UAAU,EAAE,KAAK,CAAC,iBAAiB;AAC7C,UAAU,YAAY,EAAE;AACxB,SAAS;AACT,QAAQ,QAAQ,EAAE,KAAK,CAAC,QAAQ,GAAG;AACnC,UAAU,MAAM,EAAE,KAAK,CAAC,QAAQ,CAAC,MAAM;AACvC,UAAU,UAAU,EAAE,SAAS;AAC/B;AACA,UAAU,UAAU,EAAE,KAAK,CAAC,QAAQ,CAAC,SAAS;AAC9C,UAAU,SAAS,EAAE,KAAK,CAAC,QAAQ,CAAC,QAAQ;AAC5C,UAAU,KAAK,EAAE,KAAK,CAAC,QAAQ,CAAC;AAChC,SAAS,GAAG,KAAK;AACjB,OAAO;AACP,KAAK,CAAC;AACN,IAAI,MAAM,MAAM,GAAG,MAAM,QAAQ,CAAC,IAAI,EAAE;AACxC,IAAI,IAAI,CAAC,QAAQ,CAAC,EAAE,EAAE;AACtB,MAAM,OAAO;AACb,QAAQ,OAAO,EAAE,KAAK;AACtB,QAAQ,KAAK,EAAE;AACf,UAAU,IAAI,EAAE,MAAM,CAAC,UAAU,IAAI,eAAe;AACpD,UAAU,OAAO,EAAE,MAAM,CAAC,UAAU,IAAI;AACxC;AACA,OAAO;AACP,IAAI;AACJ,IAAI,OAAO;AACX,MAAM,OAAO,EAAE,IAAI;AACnB,MAAM,IAAI,EAAE;AACZ,QAAQ,QAAQ,EAAE,MAAM,CAAC,IAAI,CAAC,QAAQ;AACtC,QAAQ,WAAW,EAAE,MAAM,CAAC,IAAI,CAAC,WAAW;AAC5C,QAAQ,cAAc,EAAE,MAAM,CAAC,IAAI,CAAC;AACpC;AACA,KAAK;AACL,EAAE,CAAC,CAAC,OAAO,KAAK,EAAE;AAClB,IAAI,OAAO,CAAC,KAAK,CAAC,yBAAyB,EAAE,KAAK,CAAC;AACnD,IAAI,OAAO;AACX,MAAM,OAAO,EAAE,KAAK;AACpB,MAAM,KAAK,EAAE;AACb,QAAQ,IAAI,EAAE,eAAe;AAC7B,QAAQ,OAAO,EAAE,KAAK,YAAY,KAAK,GAAG,KAAK,CAAC,OAAO,GAAG;AAC1D;AACA,KAAK;AACL,EAAE;AACF;AACA,eAAe,0BAA0B,CAAC,OAAO,EAAE;AACnD,EAAE,MAAM,MAAM,GAAG,WAAW,CAAC,oBAAoB;AACjD,EAAE,MAAM,MAAM,GAAG,WAAW,CAAC,oBAAoB,IAAI,0CAA0C;AAC/F,EAAE,IAAI,CAAC,MAAM,EAAE;AACf,IAAI,MAAM,IAAI,KAAK,CAAC,qCAAqC,CAAC;AAC1D,EAAE;AACF,EAAE,IAAI;AACN,IAAI,MAAM,QAAQ,GAAG,MAAM,KAAK,CAAC,CAAC,EAAE,MAAM,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC,EAAE;AAChE,MAAM,MAAM,EAAE,KAAK;AACnB,MAAM,OAAO,EAAE;AACf,QAAQ,SAAS,EAAE;AACnB;AACA,KAAK,CAAC;AACN,IAAI,IAAI,CAAC,QAAQ,CAAC,EAAE,EAAE;AACtB,MAAM,OAAO,IAAI;AACjB,IAAI;AACJ,IAAI,MAAM,MAAM,GAAG,MAAM,QAAQ,CAAC,IAAI,EAAE;AACxC,IAAI,OAAO,MAAM,CAAC,IAAI;AACtB,EAAE,CAAC,CAAC,OAAO,KAAK,EAAE;AAClB,IAAI,OAAO,CAAC,KAAK,CAAC,kCAAkC,EAAE,KAAK,CAAC;AAC5D,IAAI,OAAO,IAAI;AACf,EAAE;AACF;;;;"}